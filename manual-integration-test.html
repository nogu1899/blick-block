<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Task 14: çµ±åˆãƒ†ã‚¹ãƒˆã¨ãƒ‡ãƒãƒƒã‚° - æ‰‹å‹•ãƒ†ã‚¹ãƒˆ</title>
    <style>
        body {
            margin: 0;
            padding: 20px;
            font-family: Arial, sans-serif;
            background-color: #222;
            color: white;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
        }
        
        .test-section {
            margin-bottom: 30px;
            padding: 20px;
            background-color: #333;
            border-radius: 8px;
        }
        
        .test-results {
            margin-top: 20px;
            padding: 15px;
            background-color: #444;
            border-radius: 5px;
            font-family: monospace;
            white-space: pre-wrap;
        }
        
        .success {
            color: #4CAF50;
        }
        
        .error {
            color: #f44336;
        }
        
        .info {
            color: #2196F3;
        }
        
        button {
            background-color: #4CAF50;
            color: white;
            border: none;
            padding: 10px 20px;
            margin: 5px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 14px;
        }
        
        button:hover {
            background-color: #45a049;
        }
        
        button:disabled {
            background-color: #666;
            cursor: not-allowed;
        }
        
        #gameCanvas {
            border: 2px solid #555;
            display: block;
            margin: 20px auto;
        }
        
        .stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }
        
        .stat-card {
            background-color: #444;
            padding: 15px;
            border-radius: 5px;
            text-align: center;
        }
        
        .stat-value {
            font-size: 24px;
            font-weight: bold;
            color: #4CAF50;
        }
        
        .stat-label {
            font-size: 14px;
            color: #ccc;
            margin-top: 5px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸš€ Task 14: çµ±åˆãƒ†ã‚¹ãƒˆã¨ãƒ‡ãƒãƒƒã‚°</h1>
        <p>ãƒ–ãƒ­ãƒƒã‚¯å´©ã—ã‚²ãƒ¼ãƒ ã®çµ±åˆãƒ†ã‚¹ãƒˆã¨å‹•ä½œç¢ºèªã‚’è¡Œã„ã¾ã™ã€‚</p>
        
        <div class="test-section">
            <h2>ğŸ® ã‚²ãƒ¼ãƒ ç”»é¢</h2>
            <canvas id="gameCanvas" width="800" height="600"></canvas>
            
            <div>
                <button onclick="startTests()">çµ±åˆãƒ†ã‚¹ãƒˆé–‹å§‹</button>
                <button onclick="resetGame()">ã‚²ãƒ¼ãƒ ãƒªã‚»ãƒƒãƒˆ</button>
                <button onclick="runPerformanceTest()">ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒ†ã‚¹ãƒˆ</button>
                <button onclick="testBrowserCompatibility()">ãƒ–ãƒ©ã‚¦ã‚¶äº’æ›æ€§ãƒ†ã‚¹ãƒˆ</button>
                <button onclick="simulateGameplay()">ã‚²ãƒ¼ãƒ ãƒ—ãƒ¬ã‚¤ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³</button>
            </div>
        </div>
        
        <div class="test-section">
            <h2>ğŸ“Š ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ çµ±è¨ˆ</h2>
            <div class="stats">
                <div class="stat-card">
                    <div class="stat-value" id="fps">--</div>
                    <div class="stat-label">FPS</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="score">--</div>
                    <div class="stat-label">ã‚¹ã‚³ã‚¢</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="blocks">--</div>
                    <div class="stat-label">æ®‹ã‚Šãƒ–ãƒ­ãƒƒã‚¯</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="gameState">--</div>
                    <div class="stat-label">ã‚²ãƒ¼ãƒ çŠ¶æ…‹</div>
                </div>
            </div>
        </div>
        
        <div class="test-section">
            <h2>ğŸ§ª ãƒ†ã‚¹ãƒˆçµæœ</h2>
            <div class="test-results" id="testResults">ãƒ†ã‚¹ãƒˆã‚’é–‹å§‹ã—ã¦ãã ã•ã„...</div>
        </div>
        
        <div class="test-section">
            <h2>âš¡ ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹çµæœ</h2>
            <div class="test-results" id="performanceResults">ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒ†ã‚¹ãƒˆã‚’å®Ÿè¡Œã—ã¦ãã ã•ã„...</div>
        </div>
        
        <div class="test-section">
            <h2>ğŸŒ ãƒ–ãƒ©ã‚¦ã‚¶äº’æ›æ€§çµæœ</h2>
            <div class="test-results" id="compatibilityResults">ãƒ–ãƒ©ã‚¦ã‚¶äº’æ›æ€§ãƒ†ã‚¹ãƒˆã‚’å®Ÿè¡Œã—ã¦ãã ã•ã„...</div>
        </div>
    </div>

    <script src="script.js"></script>
    <script>
        let testResults = [];
        let performanceMetrics = {
            frameCount: 0,
            lastFrameTime: 0,
            renderTimes: [],
            updateTimes: []
        };
        
        // ãƒ†ã‚¹ãƒˆçµæœã‚’è¡¨ç¤ºã™ã‚‹é–¢æ•°
        function displayResults(elementId, results) {
            const element = document.getElementById(elementId);
            element.innerHTML = results.map(result => {
                const status = result.passed ? 'âœ…' : 'âŒ';
                const className = result.passed ? 'success' : 'error';
                return `<span class="${className}">${status} ${result.name}</span>`;
            }).join('\n');
        }
        
        // çµ±è¨ˆæƒ…å ±ã‚’æ›´æ–°ã™ã‚‹é–¢æ•°
        function updateStats() {
            if (game && game.initialized) {
                document.getElementById('fps').textContent = Math.round(1000 / 16.67);
                document.getElementById('score').textContent = game.getScore().toLocaleString();
                
                if (game.blockManager) {
                    const stats = game.blockManager.getStats();
                    document.getElementById('blocks').textContent = stats.active;
                }
                
                document.getElementById('gameState').textContent = game.getGameState();
            }
        }
        
        // çµ±åˆãƒ†ã‚¹ãƒˆã‚’å®Ÿè¡Œ
        function startTests() {
            testResults = [];
            const resultsElement = document.getElementById('testResults');
            resultsElement.innerHTML = '<span class="info">ğŸ§ª çµ±åˆãƒ†ã‚¹ãƒˆå®Ÿè¡Œä¸­...</span>';
            
            // ãƒ†ã‚¹ãƒˆ1: ã‚²ãƒ¼ãƒ åˆæœŸåŒ–
            try {
                if (!game) {
                    game = new Game();
                }
                const initResult = game.init();
                testResults.push({
                    name: 'ã‚²ãƒ¼ãƒ åˆæœŸåŒ–ãƒ†ã‚¹ãƒˆ',
                    passed: initResult && game.initialized
                });
            } catch (error) {
                testResults.push({
                    name: 'ã‚²ãƒ¼ãƒ åˆæœŸåŒ–ãƒ†ã‚¹ãƒˆ',
                    passed: false,
                    error: error.message
                });
            }
            
            // ãƒ†ã‚¹ãƒˆ2: ã‚²ãƒ¼ãƒ è¦ç´ ã®å­˜åœ¨ç¢ºèª
            try {
                const elementsExist = game.ball && game.paddle && game.blockManager && 
                                    game.inputHandler && game.collisionDetector;
                testResults.push({
                    name: 'ã‚²ãƒ¼ãƒ è¦ç´ å­˜åœ¨ç¢ºèª',
                    passed: !!elementsExist
                });
            } catch (error) {
                testResults.push({
                    name: 'ã‚²ãƒ¼ãƒ è¦ç´ å­˜åœ¨ç¢ºèª',
                    passed: false,
                    error: error.message
                });
            }
            
            // ãƒ†ã‚¹ãƒˆ3: Canvas APIäº’æ›æ€§
            try {
                const canvas = document.getElementById('gameCanvas');
                const ctx = canvas.getContext('2d');
                const apiExists = ctx && typeof ctx.fillRect === 'function' && 
                                typeof ctx.arc === 'function';
                testResults.push({
                    name: 'Canvas APIäº’æ›æ€§',
                    passed: !!apiExists
                });
            } catch (error) {
                testResults.push({
                    name: 'Canvas APIäº’æ›æ€§',
                    passed: false,
                    error: error.message
                });
            }
            
            // ãƒ†ã‚¹ãƒˆ4: ã‚²ãƒ¼ãƒ çŠ¶æ…‹ç®¡ç†
            try {
                const initialState = game.getGameState();
                game.handleGameOver();
                const gameOverState = game.getGameState();
                game.resetGame();
                const resetState = game.getGameState();
                
                const stateManagementWorks = initialState === 'playing' && 
                                           gameOverState === 'game_over' && 
                                           resetState === 'playing';
                testResults.push({
                    name: 'ã‚²ãƒ¼ãƒ çŠ¶æ…‹ç®¡ç†',
                    passed: stateManagementWorks
                });
            } catch (error) {
                testResults.push({
                    name: 'ã‚²ãƒ¼ãƒ çŠ¶æ…‹ç®¡ç†',
                    passed: false,
                    error: error.message
                });
            }
            
            // ãƒ†ã‚¹ãƒˆ5: ã‚¹ã‚³ã‚¢ã‚·ã‚¹ãƒ†ãƒ 
            try {
                const initialScore = game.getScore();
                game.addScore(100);
                const afterAddScore = game.getScore();
                game.resetGame();
                const afterResetScore = game.getScore();
                
                const scoreSystemWorks = initialScore === 0 && 
                                        afterAddScore === 100 && 
                                        afterResetScore === 0;
                testResults.push({
                    name: 'ã‚¹ã‚³ã‚¢ã‚·ã‚¹ãƒ†ãƒ ',
                    passed: scoreSystemWorks
                });
            } catch (error) {
                testResults.push({
                    name: 'ã‚¹ã‚³ã‚¢ã‚·ã‚¹ãƒ†ãƒ ',
                    passed: false,
                    error: error.message
                });
            }
            
            // ãƒ†ã‚¹ãƒˆ6: è¡çªæ¤œå‡ºã‚·ã‚¹ãƒ†ãƒ 
            try {
                const ball = game.ball;
                const paddle = game.paddle;
                const collisionDetector = game.collisionDetector;
                
                // ãƒœãƒ¼ãƒ«ã‚’ãƒ‘ãƒ‰ãƒ«ã«è¿‘ã¥ã‘ã‚‹
                ball.x = paddle.x + paddle.width / 2;
                ball.y = paddle.y - ball.radius;
                
                const collision = collisionDetector.checkBallPaddleCollision(ball, paddle);
                testResults.push({
                    name: 'è¡çªæ¤œå‡ºã‚·ã‚¹ãƒ†ãƒ ',
                    passed: !!(collision && collision.collision)
                });
            } catch (error) {
                testResults.push({
                    name: 'è¡çªæ¤œå‡ºã‚·ã‚¹ãƒ†ãƒ ',
                    passed: false,
                    error: error.message
                });
            }
            
            // ãƒ†ã‚¹ãƒˆ7: ãƒ–ãƒ­ãƒƒã‚¯ç®¡ç†ã‚·ã‚¹ãƒ†ãƒ 
            try {
                const blockManager = game.blockManager;
                const stats = blockManager.getStats();
                const expectedTotal = GAME_CONFIG.BLOCK_ROWS * GAME_CONFIG.BLOCK_COLS;
                
                const blockSystemWorks = stats.total === expectedTotal && 
                                       stats.active === expectedTotal && 
                                       stats.destroyed === 0;
                testResults.push({
                    name: 'ãƒ–ãƒ­ãƒƒã‚¯ç®¡ç†ã‚·ã‚¹ãƒ†ãƒ ',
                    passed: blockSystemWorks
                });
            } catch (error) {
                testResults.push({
                    name: 'ãƒ–ãƒ­ãƒƒã‚¯ç®¡ç†ã‚·ã‚¹ãƒ†ãƒ ',
                    passed: false,
                    error: error.message
                });
            }
            
            // ãƒ†ã‚¹ãƒˆ8: æç”»ã‚·ã‚¹ãƒ†ãƒ 
            try {
                game.render();
                testResults.push({
                    name: 'æç”»ã‚·ã‚¹ãƒ†ãƒ ',
                    passed: true
                });
            } catch (error) {
                testResults.push({
                    name: 'æç”»ã‚·ã‚¹ãƒ†ãƒ ',
                    passed: false,
                    error: error.message
                });
            }
            
            // ãƒ†ã‚¹ãƒˆ9: æ›´æ–°ã‚·ã‚¹ãƒ†ãƒ 
            try {
                const initialBallPos = { ...game.ball.getCenter() };
                game.update();
                const newBallPos = game.ball.getCenter();
                const ballMoved = initialBallPos.x !== newBallPos.x || initialBallPos.y !== newBallPos.y;
                
                testResults.push({
                    name: 'æ›´æ–°ã‚·ã‚¹ãƒ†ãƒ ',
                    passed: ballMoved
                });
            } catch (error) {
                testResults.push({
                    name: 'æ›´æ–°ã‚·ã‚¹ãƒ†ãƒ ',
                    passed: false,
                    error: error.message
                });
            }
            
            // ãƒ†ã‚¹ãƒˆ10: å…¥åŠ›ã‚·ã‚¹ãƒ†ãƒ 
            try {
                const inputHandler = game.inputHandler;
                const hasInputMethods = typeof inputHandler.isLeftPressed === 'function' && 
                                      typeof inputHandler.isRightPressed === 'function';
                testResults.push({
                    name: 'å…¥åŠ›ã‚·ã‚¹ãƒ†ãƒ ',
                    passed: hasInputMethods
                });
            } catch (error) {
                testResults.push({
                    name: 'å…¥åŠ›ã‚·ã‚¹ãƒ†ãƒ ',
                    passed: false,
                    error: error.message
                });
            }
            
            displayResults('testResults', testResults);
            
            // çµ±è¨ˆæƒ…å ±ã®æ›´æ–°ã‚’é–‹å§‹
            setInterval(updateStats, 100);
            
            // ã‚²ãƒ¼ãƒ ã‚’é–‹å§‹
            if (game && game.initialized) {
                game.startGame();
            }
        }
        
        // ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒ†ã‚¹ãƒˆã‚’å®Ÿè¡Œ
        function runPerformanceTest() {
            const resultsElement = document.getElementById('performanceResults');
            resultsElement.innerHTML = '<span class="info">âš¡ ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒ†ã‚¹ãƒˆå®Ÿè¡Œä¸­...</span>';
            
            if (!game || !game.initialized) {
                resultsElement.innerHTML = '<span class="error">âŒ ã‚²ãƒ¼ãƒ ãŒåˆæœŸåŒ–ã•ã‚Œã¦ã„ã¾ã›ã‚“</span>';
                return;
            }
            
            const results = [];
            
            // æç”»ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒ†ã‚¹ãƒˆ
            const renderTimes = [];
            for (let i = 0; i < 100; i++) {
                const startTime = performance.now();
                game.render();
                const endTime = performance.now();
                renderTimes.push(endTime - startTime);
            }
            
            const avgRenderTime = renderTimes.reduce((sum, time) => sum + time, 0) / renderTimes.length;
            const maxRenderTime = Math.max(...renderTimes);
            
            results.push(`æç”»ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹:`);
            results.push(`  å¹³å‡æç”»æ™‚é–“: ${avgRenderTime.toFixed(3)}ms`);
            results.push(`  æœ€å¤§æç”»æ™‚é–“: ${maxRenderTime.toFixed(3)}ms`);
            results.push(`  è©•ä¾¡: ${avgRenderTime < 5 ? 'âœ… è‰¯å¥½' : 'âš ï¸ è¦æ”¹å–„'}`);
            
            // æ›´æ–°ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒ†ã‚¹ãƒˆ
            const updateTimes = [];
            for (let i = 0; i < 100; i++) {
                const startTime = performance.now();
                game.update();
                const endTime = performance.now();
                updateTimes.push(endTime - startTime);
            }
            
            const avgUpdateTime = updateTimes.reduce((sum, time) => sum + time, 0) / updateTimes.length;
            const maxUpdateTime = Math.max(...updateTimes);
            
            results.push(`\næ›´æ–°å‡¦ç†ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹:`);
            results.push(`  å¹³å‡æ›´æ–°æ™‚é–“: ${avgUpdateTime.toFixed(3)}ms`);
            results.push(`  æœ€å¤§æ›´æ–°æ™‚é–“: ${maxUpdateTime.toFixed(3)}ms`);
            results.push(`  è©•ä¾¡: ${avgUpdateTime < 2 ? 'âœ… è‰¯å¥½' : 'âš ï¸ è¦æ”¹å–„'}`);
            
            // è¡çªæ¤œå‡ºãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒ†ã‚¹ãƒˆ
            const collisionTimes = [];
            const ball = game.ball;
            const paddle = game.paddle;
            const blocks = game.blockManager.getActiveBlocks();
            
            for (let i = 0; i < 1000; i++) {
                const startTime = performance.now();
                game.collisionDetector.checkBallPaddleCollision(ball, paddle);
                game.collisionDetector.checkBallWallCollision(ball, 800, 600);
                game.collisionDetector.checkBallBlocksCollision(ball, blocks);
                const endTime = performance.now();
                collisionTimes.push(endTime - startTime);
            }
            
            const avgCollisionTime = collisionTimes.reduce((sum, time) => sum + time, 0) / collisionTimes.length;
            const maxCollisionTime = Math.max(...collisionTimes);
            
            results.push(`\nè¡çªæ¤œå‡ºãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹:`);
            results.push(`  å¹³å‡è¡çªæ¤œå‡ºæ™‚é–“: ${avgCollisionTime.toFixed(4)}ms`);
            results.push(`  æœ€å¤§è¡çªæ¤œå‡ºæ™‚é–“: ${maxCollisionTime.toFixed(4)}ms`);
            results.push(`  è©•ä¾¡: ${avgCollisionTime < 0.1 ? 'âœ… è‰¯å¥½' : 'âš ï¸ è¦æ”¹å–„'}`);
            
            // ãƒ¡ãƒ¢ãƒªä½¿ç”¨é‡ï¼ˆæ¦‚ç®—ï¼‰
            const memoryInfo = performance.memory ? {
                used: Math.round(performance.memory.usedJSHeapSize / 1024 / 1024),
                total: Math.round(performance.memory.totalJSHeapSize / 1024 / 1024),
                limit: Math.round(performance.memory.jsHeapSizeLimit / 1024 / 1024)
            } : null;
            
            if (memoryInfo) {
                results.push(`\nãƒ¡ãƒ¢ãƒªä½¿ç”¨é‡:`);
                results.push(`  ä½¿ç”¨ä¸­: ${memoryInfo.used}MB`);
                results.push(`  ç·è¨ˆ: ${memoryInfo.total}MB`);
                results.push(`  åˆ¶é™: ${memoryInfo.limit}MB`);
                results.push(`  è©•ä¾¡: ${memoryInfo.used < 50 ? 'âœ… è‰¯å¥½' : 'âš ï¸ è¦æ”¹å–„'}`);
            }
            
            resultsElement.innerHTML = results.join('\n');
        }
        
        // ãƒ–ãƒ©ã‚¦ã‚¶äº’æ›æ€§ãƒ†ã‚¹ãƒˆ
        function testBrowserCompatibility() {
            const resultsElement = document.getElementById('compatibilityResults');
            const results = [];
            
            // ãƒ–ãƒ©ã‚¦ã‚¶æƒ…å ±
            results.push(`ãƒ–ãƒ©ã‚¦ã‚¶æƒ…å ±:`);
            results.push(`  User Agent: ${navigator.userAgent}`);
            results.push(`  ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ : ${navigator.platform}`);
            results.push(`  è¨€èª: ${navigator.language}`);
            
            // Canvas ã‚µãƒãƒ¼ãƒˆ
            const canvas = document.createElement('canvas');
            const ctx2d = canvas.getContext('2d');
            results.push(`\nCanvas ã‚µãƒãƒ¼ãƒˆ:`);
            results.push(`  2D Context: ${ctx2d ? 'âœ… ã‚µãƒãƒ¼ãƒˆ' : 'âŒ éã‚µãƒãƒ¼ãƒˆ'}`);
            
            // JavaScript æ©Ÿèƒ½ã‚µãƒãƒ¼ãƒˆ
            results.push(`\nJavaScript æ©Ÿèƒ½ã‚µãƒãƒ¼ãƒˆ:`);
            results.push(`  ES6 Classes: ${typeof class {} === 'function' ? 'âœ…' : 'âŒ'}`);
            results.push(`  Arrow Functions: ${(() => true)() ? 'âœ…' : 'âŒ'}`);
            results.push(`  Template Literals: ${`test` === 'test' ? 'âœ…' : 'âŒ'}`);
            results.push(`  Destructuring: ${(() => { try { const {a} = {a:1}; return true; } catch(e) { return false; } })() ? 'âœ…' : 'âŒ'}`);
            results.push(`  Spread Operator: ${(() => { try { const a = [...[1,2]]; return true; } catch(e) { return false; } })() ? 'âœ…' : 'âŒ'}`);
            
            // Web API ã‚µãƒãƒ¼ãƒˆ
            results.push(`\nWeb API ã‚µãƒãƒ¼ãƒˆ:`);
            results.push(`  requestAnimationFrame: ${typeof requestAnimationFrame === 'function' ? 'âœ…' : 'âŒ'}`);
            results.push(`  Performance API: ${typeof performance === 'object' ? 'âœ…' : 'âŒ'}`);
            results.push(`  Local Storage: ${typeof localStorage === 'object' ? 'âœ…' : 'âŒ'}`);
            
            // ã‚¤ãƒ™ãƒ³ãƒˆã‚µãƒãƒ¼ãƒˆ
            results.push(`\nã‚¤ãƒ™ãƒ³ãƒˆã‚µãƒãƒ¼ãƒˆ:`);
            results.push(`  Keyboard Events: ${typeof KeyboardEvent === 'function' ? 'âœ…' : 'âŒ'}`);
            results.push(`  Mouse Events: ${typeof MouseEvent === 'function' ? 'âœ…' : 'âŒ'}`);
            results.push(`  Touch Events: ${typeof TouchEvent === 'function' ? 'âœ…' : 'âŒ'}`);
            
            resultsElement.innerHTML = results.join('\n');
        }
        
        // ã‚²ãƒ¼ãƒ ãƒ—ãƒ¬ã‚¤ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³
        function simulateGameplay() {
            if (!game || !game.initialized) {
                alert('å…ˆã«çµ±åˆãƒ†ã‚¹ãƒˆã‚’å®Ÿè¡Œã—ã¦ãã ã•ã„');
                return;
            }
            
            // è‡ªå‹•ãƒ—ãƒ¬ã‚¤ã®ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³
            let simulationCount = 0;
            const maxSimulations = 1000;
            
            const simulate = () => {
                if (simulationCount >= maxSimulations || game.getGameState() !== 'playing') {
                    return;
                }
                
                // ãƒ©ãƒ³ãƒ€ãƒ ã«ãƒ‘ãƒ‰ãƒ«ã‚’ç§»å‹•
                if (Math.random() > 0.5) {
                    game.paddle.moveLeft();
                } else {
                    game.paddle.moveRight();
                }
                
                // ã‚²ãƒ¼ãƒ ã‚’æ›´æ–°
                game.update();
                game.render();
                
                simulationCount++;
                requestAnimationFrame(simulate);
            };
            
            simulate();
        }
        
        // ã‚²ãƒ¼ãƒ ãƒªã‚»ãƒƒãƒˆ
        function resetGame() {
            if (game && game.resetGame) {
                game.resetGame();
                updateStats();
            }
        }
        
        // ãƒšãƒ¼ã‚¸èª­ã¿è¾¼ã¿æ™‚ã®åˆæœŸåŒ–
        window.addEventListener('load', () => {
            console.log('ğŸš€ Task 14: çµ±åˆãƒ†ã‚¹ãƒˆã¨ãƒ‡ãƒãƒƒã‚°ãƒšãƒ¼ã‚¸ãŒèª­ã¿è¾¼ã¾ã‚Œã¾ã—ãŸ');
            console.log('çµ±åˆãƒ†ã‚¹ãƒˆé–‹å§‹ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¦ãƒ†ã‚¹ãƒˆã‚’é–‹å§‹ã—ã¦ãã ã•ã„');
        });
        
        // ã‚­ãƒ¼ãƒœãƒ¼ãƒ‰ã‚¤ãƒ™ãƒ³ãƒˆã®ãƒ†ã‚¹ãƒˆ
        document.addEventListener('keydown', (event) => {
            if (game && game.inputHandler) {
                console.log(`ã‚­ãƒ¼æŠ¼ä¸‹: ${event.key}`);
            }
        });
    </script>
</body>
</html>